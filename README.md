# Опис програми "Математичний тренажер".

Вона складається з декількох частин. Основної функції function training і декількох допоміжних function mathOp та function randomInt.

## Function randomInt

Ця функція призначена для генерації випадкового числа з певного діапазону.

```JavaScript
function randomInt(min, max){
		var length = max - min + 1;
		var rand = Math.floor(Math.random() * length) + min;
		return rand;
	}
```

В її основі використовуються математичний об'єкт `_Math_` та два його методи `_.floor_` та `_.random_`.
Метод `_.random_`  - генерує два випадкових числа в діапазоні від 0 до 1.
Для генерації числа в певному діапазоні використовується наступний вираз:
```JavaScript
(Math.random() * (max - min + 1)) + min;
```

де `min` - початок діапазону, `max` - кінець діапазону.
Параметри min та max, ми вказуємо в основній програмі.
Для того що ми ортимали ціле значення, ми використовуємо метод `_.floor_`. Цей метод округлює наше значення до меншого (вниз).
Після генерації та округлення числа, воно записується в змінну `_rand_` та повертається основній програмі.


## Function mathOp

Ця функція зрівнює параметр `_op_` та відповідно до нього записує результат однієї з математичних операцій до змінної `_res_` та повертає його основній програмі.

```JavaScript
	function mathOp(a, b, op){
		var res;

		if (op == "+") {
			res = a + b;
		} else if (op == "-"){
			res = a - b;
		} else if (op == "*"){
			res = a * b;
		}else if (op == "/") {
			if (b == "0"){
				res = false;
			} else{
				res = a / b;
			}
		} else{
			res = false;
		}

		return res;
	}
```
Параметри `_a, b, op_` ми отримуємо від **function randomInt**.


## Function training

Це основна програма. 

1. Спочатку ми оголошуємо змінні з якими будемо працювати.
```JavaScript
	var x, y, code, op, ans, res, ansStr, error = 0, good = 0, erros = [];
	var variants = ["+", "-", "*", "/"];
```
Змінні `_error_` та `_good_` - це лічильники. Вони рахують кількість помилкових та правельних відповідей користувача.
В масив` _errors_` записуються помилкові відповіді користувача.
Масив `_variants_` містить перелік математичних операцій.
Змінні `_x, y, code_` - в них присвоюються числа які генерує функція **function randomInt**.
В змінну `_ansStr_` - присвоюється відповідь користувача.
В змінну `_ans_ -` присвоюється приведена в числовий формат відповідь користувача.
В змінну `_res_ -` присвоюється результат математичної операції для подальшого порівняння з відповідю користувача.
В змінну `_op_ -`присвоюється знак математичної операції.

2. Запускаємо цикл `_for_` на 10 інтерацій.

```JavaScript
	for (var i = 0; i < 10; i++){
		//код програми
	}
```
де `_i_` лічильник інтерацій.

  - 2.1. Присвоєння значень в змінні для подальшої роботи.

```JavaScript
	x = randomInt(3, 15); //присвоюється випадкове число з діапазону від 3 до 15.
	y = randomInt(3, 15); //присвоюється випадкове число з діапазону від 3 до 15.
	code = randomInt(0, 3); //присвоюється випадкове число з діапазону від 0 до 3.
	op = variants[code]; //витягує знак математичної операції із масиву variants по індексу.
	res = mathOp(x, y, op); //присвоюється результат математичної операції.
```

  - 2.2. Запускаємо цикл `_do...while_`.

Цикл призначений для перевірки значень які вводить користувач.

Спочатку він виводить вікно для користувача з завданням. Результат відповіді користувача записує в змінну `_ansStr_`.
Потім присвоює приведену в числовий формат відповідь користувача.

```JavaScript
	do{
		ansStr = prompt( x + '' + op + '' + y + " = ?" );
		ans = +ansStr;
	}
```

Додаткова змінна необхідна для перевірки відповіді користувача на пустий рядок.
Також відбуваєтся перевірка відповіді користувача на введення не числового знаення.
```JavaScript
	while (ansStr == null || isNaN(ans));
```
Цикл працює поки одна з цих умов **true**.

  - 2.3. Зрівнюємо відповідь користувача та результат нашої функції.

Використовуємо умовний оператор `_if_`.

```JavaScript
	if (ans.toFixed(2) == res.toFixed(2)) {	  
		good++;
	} else{
		error++;
		erros.push(x + '' + op + '' + y + " = " + res.toFixed(2) + ". Your answer:  " + ans.toFixed(2));
	}
``` 
Так як в нас можлива операція ділення ('/'), ми використаємо метод `_.toFixed_` для округлення відповідей до 2-х чисел після десяткової коми.
Методом `_.push_` ми добавляємо в наш масив математичний вираз, його результат та відповідь користувача.

Повиний код циклу:
```JavaScript
	for (var i = 0; i < 10; i++){

		x = randomInt(3, 15);
		y = randomInt(3, 15);
		code = randomInt(0, 3);
		op = variants[code];
		res = mathOp(x, y, op);

		do{
			ansStr = prompt( x + '' + op + '' + y + " = ?" );
			ans = +ansStr;
		}
		while (ansStr == null || isNaN(ans));

		if (ans.toFixed(2) == res.toFixed(2)) {	  
			good++;
		} else{
			error++;
			erros.push(x + '' + op + '' + y + " = " + res.toFixed(2) + ". Your answer:  " + ans.toFixed(2));
		}
	}
```
3. Оформлення результату.

Дальше працюємо з документом HTML.

```JavaScript
	document.querySelector('.good').innerHTML = good;
	document.querySelector('.bad').innerHTML = error;
```

Даними командами ми додаємо в html файл, а саме до класу `_.good_` і `_.bad_` наші лічильники `_good_` та `_error_`.
Вони будуть виходити кількість правильних та неправельних відповідей.

Тепер ми виведемо користувачу список його помилок, та правельну відповідь.
Для цього створимо змінну та зітремо весь її вміст в html:
```JavaScript
	var divErrors = document.querySelector(".errors");
	divErrors.innerHTML = " ";
``` 
Другий рядок необхідний для того, щоб при новуму запуску тренажера ми бачили тільки поточні помилки.

Дальше запустимо цикл для запису помилок в масив.

```JavaScript
	for(var i = 0; i < erros.length; i++){
		divErrors.innerHTML +=  ("<p>" + erros[i] + "</p>");
	}
```
Властивість масиву `_.lenght_` допомагає нам визначити кількість елементів в масиві.
Дальше до класу `_.errors_` ми додаватимоме всі помилки які записані в масиві `_errors[]_` та виводитимемо їх в новому рядку.

